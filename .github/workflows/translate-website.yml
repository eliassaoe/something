name: Translate Files

on:
  push:
    branches:
      - main  # or master, depending on your default branch
    paths:
      - '**.html'  # Only trigger for HTML files

jobs:
  translate:
    runs-on: ubuntu-latest
    permissions:
      contents: write  # Required for committing changes

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3
        with:
          fetch-depth: 0  # Get full history for detecting changes

      - name: GPT Translate Action
        uses: imaun/gpt-translate-action@v1.9.0
        with:
          api_key: ${{ secrets.OPENAI_API_KEY }}
          ai_service: "openai"
          ai_model: "gpt-4"  # You can use gpt-3.5-turbo for a cheaper option
          target_lang: "Spanish"
          target_lang_code: "es"
          file_exts: "html"  # Corrected from file_extensions to file_exts
          output_format: "{dirname}/{lang}/{basename}"
          base_branch: main  # Match your default branch
